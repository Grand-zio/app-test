{"name": "打开微信，进入小程序首页，断言成功", "status": "failed", "statusDetails": {"message": "AssertionError: assert 1 == 2", "trace": "self = <ebuy_app.testcase.djc_demo.test_005.TestAppLets object at 0x1230c4880>, device_name = '10.15.20.72:20001'\n\n    @allure.feature('UI测试demo')\n    @allure.title(\"打开微信，进入小程序首页，断言成功\")\n    @allure.severity('blocker')\n    @allure.description(\"打开微信，登录小程序，进入小熊麦麦首页\")\n    def test_into_home_000(self, device_name):\n    \n        try:\n            e_buy_home_img_except = \"/Users/dongjunchao/Desktop/ebuy_app/statics/exce_img/e_buy_home_offline.jpg\"\n            d = u2.connect(device_name)\n            d.implicitly_wait(15.0)\n    \n            screen_status = d.info.get('screenOn')\n            if not screen_status:\n                d.screen_on()\n                d.swipe_ext(\"up\", 0.6)\n                time.sleep(3)\n    \n            d.press(\"home\")\n            d.press(\"home\")\n            d.press(\"home\")\n            time.sleep(1)\n    \n            d(description=\"第2屏\").click()\n            d(resourceId=\"com.miui.home:id/icon_icon\", description=\"微信\").click()\n    \n            # d.app_start(\"com.tencent.mm\", wait=True)\n            time.sleep(3)\n    \n            # 判断是否在微信首页-发现页\n            found_icon = d(resourceId=\"com.tencent.mm:id/dub\", text=\"发现\")\n            if not found_icon.exists:\n                # d(resourceId=\"com.tencent.mm:id/dn\", description=\"返回\").click()\n                d.press(\"back\")\n>           found_icon.click(timeout=10)\n\ntestcase/djc_demo/test_005.py:51: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <uiautomator2._selector.UiObject object at 0x12311cf70>, timeout = 10, offset = None\n\n    def click(self, timeout=None, offset=None):\n        \"\"\"\n        Click UI element.\n    \n        Args:\n            timeout: seconds wait element show up\n            offset: (xoff, yoff) default (0.5, 0.5) -> center\n    \n        The click method does the same logic as java uiautomator does.\n        1. waitForExists 2. get VisibleBounds center 3. send click event\n    \n        Raises:\n            UiObjectNotFoundError\n        \"\"\"\n>       self.must_wait(timeout=timeout)\n\nvenv/lib/python3.8/site-packages/uiautomator2/_selector.py:150: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <uiautomator2._selector.UiObject object at 0x12311cf70>, exists = True, timeout = 10\n\n    def must_wait(self, exists=True, timeout=None):\n        \"\"\" wait and if not found raise UiObjectNotFoundError \"\"\"\n        if not self.wait(exists, timeout):\n>           raise UiObjectNotFoundError({'code': -32002, 'data': str(self.selector), 'method': 'wait'})\nE           uiautomator2.exceptions.UiObjectNotFoundError: -32002 Client error: <> data: Selector [resourceId='com.tencent.mm:id/dub', text='发现'], method: None\n\nvenv/lib/python3.8/site-packages/uiautomator2/_selector.py:345: UiObjectNotFoundError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <ebuy_app.testcase.djc_demo.test_005.TestAppLets object at 0x1230c4880>, device_name = '10.15.20.72:20001'\n\n    @allure.feature('UI测试demo')\n    @allure.title(\"打开微信，进入小程序首页，断言成功\")\n    @allure.severity('blocker')\n    @allure.description(\"打开微信，登录小程序，进入小熊麦麦首页\")\n    def test_into_home_000(self, device_name):\n    \n        try:\n            e_buy_home_img_except = \"/Users/dongjunchao/Desktop/ebuy_app/statics/exce_img/e_buy_home_offline.jpg\"\n            d = u2.connect(device_name)\n            d.implicitly_wait(15.0)\n    \n            screen_status = d.info.get('screenOn')\n            if not screen_status:\n                d.screen_on()\n                d.swipe_ext(\"up\", 0.6)\n                time.sleep(3)\n    \n            d.press(\"home\")\n            d.press(\"home\")\n            d.press(\"home\")\n            time.sleep(1)\n    \n            d(description=\"第2屏\").click()\n            d(resourceId=\"com.miui.home:id/icon_icon\", description=\"微信\").click()\n    \n            # d.app_start(\"com.tencent.mm\", wait=True)\n            time.sleep(3)\n    \n            # 判断是否在微信首页-发现页\n            found_icon = d(resourceId=\"com.tencent.mm:id/dub\", text=\"发现\")\n            if not found_icon.exists:\n                # d(resourceId=\"com.tencent.mm:id/dn\", description=\"返回\").click()\n                d.press(\"back\")\n            found_icon.click(timeout=10)\n            time.sleep(3)\n            my_found_pic = img.save_screen_img(d, 'my_found_page', device_name)  # 发现页截图\n    \n            # 进入小程序\n            applet_icon = d(resourceId=\"android:id/title\", text=\"小程序\")\n            applet_icon.click()\n            time.sleep(3)\n            applets_pic = img.save_screen_img(d, 'applet_page', device_name)  # 小程序页截图\n    \n            d.xpath('//androidx.appcompat.widget.LinearLayoutCompat').click()\n            time.sleep(1)\n            d.send_keys(\"云品智能\", clear=True)\n            time.sleep(1)\n    \n            d.click(0.222, 0.193)\n            time.sleep(5)\n            shou_ye = img.save_screen_img(d, 'shou_ye', device_name)\n    \n            time.sleep(15)\n    \n            d.press(\"home\")\n            d.app_stop(\"com.tencent.mm\")\n    \n            comment = ['e Buy Life', 'For your better life!', '精选商品']\n            result = as_i.assert_images(device_name, e_buy_home_img_except, shou_ye, comment)\n            log.info(3)\n            # ocr 结果\n            ocr_result = result.get('ocr_result')\n            ocr_description = str(result.get('ocr_description'))\n    \n            # 图片对比\n            compare_img = result.get('compare_img_path')\n    \n            similar_description = str(result.get('similar_data'))\n            pHash = result.get('similar_data').get('pHash')\n            aHash = result.get('similar_data').get('aHash')\n            third_res = result.get('similar_data').get('third_res')\n            log.info(4)\n            if ocr_result:\n                if pHash < 25 and aHash < 10:\n                    if third_res and third_res > 0.95:\n                        is_similar = True\n                    else:\n                        is_similar = True\n                else:\n                    is_similar = False\n            else:\n                is_similar = False\n            log.info(5)\n            # 截图\n            AllureReport.show_step('手机型号', device_name)\n            AllureReport.show_pic(e_buy_home_img_except, '预期-首页截图')\n            AllureReport.show_pic(my_found_pic, '发现页截图')\n            AllureReport.show_pic(applets_pic, '小程序页截图')\n            AllureReport.show_pic(shou_ye, '实际-首页截图')\n            AllureReport.show_pic(compare_img, '预期-实际比对效果')\n    \n            AllureReport.show_step('ocr光学文字识别', ocr_description)\n            AllureReport.show_step('图像相似度计算结果', similar_description)\n    \n            # assert is_similar\n    \n        except Exception:\n>           assert 1 == 2\nE           assert 1 == 2\n\ntestcase/djc_demo/test_005.py:115: AssertionError"}, "description": "打开微信，登录小程序，进入小熊麦麦首页", "attachments": [{"name": "log", "source": "ad1deec8-abdb-456b-8b8c-d9856a6f3d9e-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "870f926c-ae30-40fa-94db-be8558a27327-attachment.txt", "type": "text/plain"}], "start": 1624499355394, "stop": 1624499372827, "uuid": "8cb83ea7-1f2c-4c04-91f6-ed3f8afdd835", "historyId": "f636f903c5dae63a550b64097398b26c", "testCaseId": "4e92630b09602f4f81ac2ce0f379c6ff", "fullName": "testcase.djc_demo.test_005.TestAppLets#test_into_home_000", "labels": [{"name": "severity", "value": "blocker"}, {"name": "feature", "value": "UI测试demo"}, {"name": "parentSuite", "value": "testcase.djc_demo"}, {"name": "suite", "value": "test_005"}, {"name": "subSuite", "value": "TestAppLets"}, {"name": "host", "value": "lishuyadeMacBook-Air.local"}, {"name": "thread", "value": "90657-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcase.djc_demo.test_005"}]}